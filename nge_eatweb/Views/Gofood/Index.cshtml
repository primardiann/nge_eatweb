@model nge_eatweb.Models.ViewModels.GofoodTransaksiPageViewModel

@{
    ViewData["Title"] = "Transaksi GoFood";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<div class="flex min-h-screen bg-[#FAFAFA] text-sm">
    <main class="flex-1 px-8 py-6">
        <!-- Breadcrumb -->
        <div class="text-gray-500 mb-4 flex items-center space-x-1">
            <a href="/dashboard" class="text-black font-semibold hover:underline">Dashboard</a>
            <span class="text-[#888]">></span>
            <span class="text-[#888]">Transaksi GoFood</span>
        </div>

        <!-- Header dan Tombol Tambah -->
        <div class="flex justify-between items-center mb-6">
            <button class="flex items-center gap-2 px-3 py-1 text-white font-medium rounded-lg"
                    style="background-color: #F58220;" onclick="openTambahModal()">
                <span class="text-lg">+</span>
                <span>Tambah Transaksi</span>
            </button>
            <input type="date" id="tanggalFilter" name="tanggalFilter" class="px-3 py-1 border rounded" />
        </div>

        <!-- Tabel Transaksi -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <table class="min-w-full table-auto">
                <thead class="bg-[#ffd5ab] text-gray-700 text-center text-sm font-semibold select-none">
                    <tr>
                        <th class="px-6 py-3">ID Pesanan</th>
                        <th class="px-6 py-3">Tanggal</th>
                        <th class="px-6 py-3">Waktu</th>
                        <th class="px-6 py-3">Nama Pelanggan</th>
                        <th class="px-6 py-3">Metode</th>
                        <th class="px-6 py-3 max-w-[150px]">Item</th>
                        <th class="px-6 py-3">Aksi</th>
                    </tr>
                </thead>
                <tbody class="text-center text-sm text-gray-700">
                    @if (Model.TransaksiList.Any())

                    {
                        foreach (var t in Model.TransaksiList)

                        {
                            <tr class="border-t hover:bg-gray-50">
                                <td class="px-6 py-3">@t.IdPesanan</td>
                                <td class="px-6 py-3">@t.TanggalTransaksi.ToString("yyyy-MM-dd")</td>
                                <td class="px-6 py-3">@t.Waktu</td>
                                <td class="px-6 py-3">@t.NamaPelanggan</td>
                                <td class="px-6 py-3">@t.Metode</td>
                                <td class="px-6 py-3">@t.NamaItem</td>
                                <td class="px-6 py-3">
                                    <div class="flex justify-center space-x-4">
                                        <a href="javascript:void(0)" class="text-blue-600 hover:text-blue-800" title="Edit">
                                            <i class="fas fa-pen-to-square text-lg"></i>
                                        </a>
                                        <button class="text-red-600 hover:text-red-800" title="Hapus">
                                            <i class="fas fa-trash-alt text-lg"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="7" class="py-6 text-center text-gray-500">Belum ada transaksi.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </main>
</div>

<!-- Modal Tambah Transaksi -->
<div id="transactionTambahModal" class="fixed inset-0 bg-black bg-opacity-40 hidden justify-center items-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative">
        @await Html.PartialAsync("_GofoodTransaksiFormPartial", Model.FormModel)

        <button onclick="closeTambahModal()"
                class="absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-xl font-bold">
            &times;
        </button>
    </div>
</div>

@section Scripts {
    <script>
        function openTambahModal() {
            document.getElementById('transactionTambahModal').classList.remove('hidden');
            document.getElementById('transactionTambahModal').classList.add('flex');
        }

        function closeTambahModal() {
            document.getElementById('transactionTambahModal').classList.remove('flex');
            document.getElementById('transactionTambahModal').classList.add('hidden');
        }
    </script>
}
